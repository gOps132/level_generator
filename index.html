<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Twins - Level Generator</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.60.0/phaser.min.js"></script>
</head>

<body>
    <div id="game-container"></div>

    <div id="loading-screen" style="display: none;">
        <div class="loader-content">
            <div class="spinner"></div>
            <h2 id="loading-text">GENERATING TIME STREAM...</h2>
            <div id="loading-subtext">Calculating temporal paradoxes...</div>
        </div>
    </div>

    <div id="ui-layer">
        <div id="save-load-container"
            style="position: absolute; top: 20px; right: 20px; display: flex; gap: 10px; z-index: 1000;">
            <select id="save-dropdown"
                style="padding: 5px; background: #333; color: white; border: 1px solid #555; border-radius: 4px;">
                <option value="">-- Load Saved Level --</option>
            </select>
            <button id="save-btn"
                style="padding: 5px 10px; background: #28a745; color: white; border: none; cursor: pointer; border-radius: 4px; font-weight: bold;">SAVE</button>
        </div>

        <div class="hud-top">
            <div class="counter-box">
                <span>MOVES LEFT: </span>
                <span id="step-counter">0</span>
            </div>
        </div>

        <div class="controls-panel">
            <h3>Generator Settings</h3>

            <div class="control-group">
                <label for="difficulty-slider">Difficulty (Obstacles): <span id="difficulty-val">5</span></label>
                <input type="range" id="difficulty-slider" min="1" max="10" value="5">
            </div>

            <div class="control-group">
                <label for="room-size-slider">Room Size: <span id="room-size-val">Medium</span></label>
                <input type="range" id="room-size-slider" min="1" max="3" value="2">
            </div>

            <div class="control-group" style="margin-top: 10px; display: flex; flex-direction: column; gap: 5px;">
                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" id="mechanic-levers" checked> Enable Levers & Gates
                </label>
                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" id="mechanic-keys" checked> Enable Keys & Doors
                </label>
                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                    <input type="checkbox" id="mechanic-boxes" checked> Enable Movable Boxes
                </label>
            </div>

            <button id="generate-btn">GENERATE NEW LEVEL</button>
            <button id="reset-btn" class="secondary-btn">RESET LEVEL</button>

            <hr style="border: 1px solid #444; margin: 15px 0;">

            <button id="solution-btn" class="info-btn">SHOW SOLUTION</button>
            <div id="solution-box"
                style="display: none; margin-top: 10px; background: #000; padding: 10px; font-size: 11px; max-height: 150px; overflow-y: auto; color: #0f0; white-space: pre-wrap; word-wrap: break-word; line-height: 1.4;">
                <!-- Path goes here -->
            </div>
        </div>

        <div class="instructions">
            <p><strong>WASD</strong> to Move Both Characters</p>
            <p><strong>Goal:</strong> Reach the Green Zones</p>
        </div>

        <div class="legend-panel"
            style="position: absolute; bottom: 20px; right: 250px; background: rgba(0,0,0,0.8); padding: 10px; border-radius: 5px; font-size: 12px; display: flex; gap: 10px;">
            <div><span style="color: #666;">■</span> Wall</div>
            <div><span style="color: #0f0;">●</span> Goal</div>
            <div><span style="color: #ff0;">K</span> Key</div>
            <div><span style="color: #a52a2a;">☒</span> Chest</div>
            <div><span style="color: #f00;">|</span> Door</div>
            <div><span style="color: #f00;">!</span> Lever</div>
            <div><span style="color: #888;">|||</span> Gate</div>
            <div><span style="color: #bc4a3c;">▣</span> Box</div>
        </div>
    </div>

    <script type="module" src="src/main.js"></script>
</body>

</html>